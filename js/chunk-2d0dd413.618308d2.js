(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dd413"],{8137:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("el-card",[t("toolbar-widget",{attrs:{buttons:e.toolbarButtons}}),t("div",{staticClass:"col-md-6 mt-3"},[t("el-form",{ref:"form_data",attrs:{"label-width":"150px","label-position":"left",model:e.form}},[t("el-form-item",{attrs:{label:"MSV",required:""}},[t("el-input",{attrs:{autofocus:""},model:{value:e.form.studentCode,callback:function(t){e.$set(e.form,"studentCode",t)},expression:"form.studentCode"}})],1),t("el-form-item",{attrs:{label:"Tên",required:""}},[t("el-input",{attrs:{autofocus:""},model:{value:e.form.fullName,callback:function(t){e.$set(e.form,"fullName",t)},expression:"form.fullName"}})],1),t("el-form-item",{attrs:{label:"Email",required:""}},[t("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),t("el-form-item",{attrs:{label:"Lớp",required:""}},[t("el-input",{model:{value:e.form.className,callback:function(t){e.$set(e.form,"className",t)},expression:"form.className"}})],1),t("el-form-item",{attrs:{label:"Khoa",required:""}},[t("el-input",{attrs:{type:"text"},model:{value:e.form.department,callback:function(t){e.$set(e.form,"department",t)},expression:"form.department"}})],1),t("el-form-item",{attrs:{label:"Ngành",required:""}},[t("el-input",{attrs:{type:"text"},model:{value:e.form.majors,callback:function(t){e.$set(e.form,"majors",t)},expression:"form.majors"}})],1)],1)],1)],1)],1)},n=[],o=(a("96cf"),a("1da1")),s=a("49e5"),l="student",i={data:function(){return{hasChange:!1,form:{studentCode:"",fullName:"",email:"",className:"",department:"",majors:""}}},watch:{form:{handler:function(){this.hasChange=!0},deep:!0}},computed:{toolbarButtons:function(){var e=!0;return this.hasChange&&(e=!1),[{label:"Quay lại",route:"".concat(l,"_main")},{label:"Lưu và tiếp tục",disabled:e,callback:this.saveAndContinue,type:"primary"},{label:"Lưu",disabled:e,callback:this.handleSave,type:"primary"}]}},created:function(){this.loadData(this.$route.params.id)},methods:{loadData:function(e){var t=this;e&&(!e&&this.$route.params.id&&(e=this.$route.params.id),this.$wrLoading(!0),Object(s["d"])(e).then((function(e){var a=e.data;a.success&&(t.$set(t,"form",a.doc),t.hasChange=!1)})).catch((function(e){console.log(e)})).finally((function(){t.$wrLoading(!1)})))},saveAndContinue:function(){this.handleSave(!0)},loadDataStudent:function(){var e=this;Object(s["a"])().then((function(t){t&&t.data&&t.data.success?(e.tableData=t.data.posts,e.posts=e.tableData.reverse()):console.error("Không thành công: ",t.data)})).catch((function(e){console.error("Lỗi khi bài đăng: ",e)}))},handleSave:function(){var e,t=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs.form_data.validate(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(n){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!=n){r.next=4;break}return r.abrupt("return",!1);case 4:return t.$wrLoading(!0),r.next=7,Object(s["h"])(t.form).then((function(r){var n=r.data;1==n.success&&(!1===a?t.$router.push({name:"".concat(l,"_main")}):e=n.doc?n.doc._id:null)}));case 7:t.$wrLoading(!1),e&&(t.$route.params.id||t.$router.push({name:"".concat(l,"_edit"),params:{id:e}}),t.loadData(e),t.$store.dispatch("reRender"));case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}}},u=i,c=a("0c7c"),d=Object(c["a"])(u,r,n,!1,null,null,null);t["default"]=d.exports}}]);