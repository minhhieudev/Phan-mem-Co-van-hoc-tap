(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65b6f9a4"],{"366e":function(e,t,n){"use strict";n.r(t);n("386d");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"custom-scroll"},[t("el-card",[t("h4",{staticClass:"font-weight-bold text-success text-center mb-3"},[e._v("DANH SÁCH PHIẾU ĐIỂM")]),t("div",{staticClass:"action-trainingPoint mb-4"},[t("i",{staticClass:"fa-solid fa-rotate-right",on:{click:e.resetData}}),t("div",{staticClass:"filter-options"},e._l(e.filterOptions,(function(n,a){return t("span",{key:a,class:{selected:e.selectedFilter===n},on:{click:function(t){return e.selectFilter(n)}}},[e._v("\n          "+e._s(n)+"\n        ")])})),0),t("el-select",{staticClass:"w-5",attrs:{placeholder:"Năm học",filterable:""},model:{value:e.selectedNam,callback:function(t){e.selectedNam=t},expression:"selectedNam"}},e._l(e.namList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1),t("el-select",{attrs:{placeholder:"Kỳ",filterable:""},model:{value:e.selectedSemester,callback:function(t){e.selectedSemester=t},expression:"selectedSemester"}},[t("el-option",{attrs:{label:"Kỳ 1",value:1}}),t("el-option",{attrs:{label:"Kỳ 2",value:2}})],1),t("el-select",{attrs:{placeholder:"Khoa",filterable:""},model:{value:e.selectedKhoa,callback:function(t){e.selectedKhoa=t},expression:"selectedKhoa"}},e._l(e.khoaList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1),t("el-select",{attrs:{filterable:"",placeholder:"Lớp"},model:{value:e.selectedLop,callback:function(t){e.selectedLop=t},expression:"selectedLop"}},e._l(e.lopList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1),t("el-input",{staticClass:"search-input-trainingPoint",attrs:{size:"medium",placeholder:"Tìm theo tên, email..."},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t("el-button",{staticClass:"ml-2",attrs:{icon:"el-icon-search",type:"success",circle:""}})],1),t("el-table",{staticClass:"custom-table",attrs:{data:e.currentPageData,align:"center"}},[t("el-table-column",{attrs:{label:"STT",width:"50"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.$index;n.row;return[t("span",[e._v(e._s(a+1+(e.pagination.current_page-1)*e.pagination.page_size))])]}}])}),t("el-table-column",{attrs:{prop:"studentCode",label:"MSV",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v("\n          "+e._s(n.studentDetails.studentCode)+"\n        ")]}}])}),t("el-table-column",{attrs:{label:"Xem phiếu điểm ",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("el-button",{attrs:{type:"warning",plain:"",size:"mini",round:""},on:{click:function(t){return t.preventDefault(),e.gotoDetail(a)}}},[e._v("\n            Phiếu điểm\n          ")])]}}])}),t("el-table-column",{attrs:{label:"Trạng thái",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[a.status?t("el-button",{staticClass:"answered-button",attrs:{type:"success",size:"mini",round:""}},[e._v("\n            Đã duyệt\n          ")]):t("el-button",{staticClass:"unanswered-button",attrs:{type:"danger",size:"mini",round:""}},[e._v("\n            Chưa duyệt\n          ")])]}}])}),t("el-table-column",{attrs:{prop:"fullName",label:"Tên sinh viên",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v("\n          "+e._s(n.studentDetails.fullName)+"\n        ")]}}])}),t("el-table-column",{attrs:{prop:"createdAt",label:"Ngày chấm",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(e.formatDate(n.createdAt)))]}}])}),t("el-table-column",{attrs:{prop:"semester",label:"Học kỳ",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v("\n          "+e._s(n.semester)+"\n        ")]}}])}),t("el-table-column",{attrs:{prop:"schoolYear",label:"Năm học",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v("\n          "+e._s(n.schoolYear)+"\n        ")]}}])}),t("el-table-column",{attrs:{label:"Điểm rèn luyện",align:"center"}},[t("el-table-column",{attrs:{prop:"Total_selfAssessment",label:"SV tự chấm",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v("\n            "+e._s(n.Total_selfAssessment)+"\n          ")]}}])}),t("el-table-column",{attrs:{prop:"Total_groupAssessment",label:"Lớp chấm",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v("\n            "+e._s(n.Total_groupAssessment)+"\n          ")]}}])}),t("el-table-column",{attrs:{prop:"Total_consultantAssessment",label:"Cố vấn",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v("\n            "+e._s(n.Total_consultantAssessment)+"\n          ")]}}])})],1),t("el-table-column",{attrs:{label:"Thao tác",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",circle:""},on:{click:function(t){return t.preventDefault(),e.confirmDelete(n.row)}}})]}}])})],1),t("div",{staticClass:"mt-2"},[t("el-pagination",{attrs:{background:"",layout:"jumper, prev, pager, next, sizes, total","page-sizes":[10,25,50,100],"page-size":e.pagination.page_size,total:e.filteredTableData.length,"current-page":e.pagination.current_page},on:{"update:pageSize":function(t){return e.$set(e.pagination,"page_size",t)},"update:page-size":function(t){return e.$set(e.pagination,"page_size",t)},"update:currentPage":function(t){return e.$set(e.pagination,"current_page",t)},"update:current-page":function(t){return e.$set(e.pagination,"current_page",t)},"current-change":e.handleCurrentPageChange,"size-change":e.handlePageSizeChange}})],1)],1)],1)},i=[],r=(n("6d67"),n("ac6a"),n("5df3"),n("4f7f"),n("2909")),s=(n("6762"),n("2fdb"),n("d25f"),n("72d7")),l=n("b166"),o=(n("15f5"),{data:function(){return{tableData:[],namList:[],pagination:{current_page:1,page_size:10},totalData:0,search:"",selectedKhoa:"",selectedNganh:"",selectedLop:"",khoaList:[],nganhList:[],lopList:[],filterOptions:["Tất cả","Chưa duyệt","Đã duyệt"],selectedFilter:"Tất cả",selectedSemester:"",selectedNam:""}},created:function(){this.loadDetailTrainingPoint(),this.loadInfoToFilter()},computed:{filteredTableData:function(){var e=this;return this.tableData.filter((function(t){return(!e.search||t.studentDetails.fullName.toLowerCase().includes(e.search.toLowerCase()))&&(!e.selectedKhoa||t.studentDetails.department===e.selectedKhoa)&&(!e.selectedNganh||t.studentDetails.nganh===e.selectedNganh)&&(!e.selectedLop||t.studentDetails.className===e.selectedLop)&&(!e.selectedNam||t.schoolYear==e.selectedNam)&&(!e.selectedSemester||t.semester==e.selectedSemester)&&("Tất cả"===e.selectedFilter||"Chưa duyệt"===e.selectedFilter&&!t.status||"Đã duyệt"===e.selectedFilter&&t.status)}))},currentPageData:function(){var e=(this.pagination.current_page-1)*this.pagination.page_size,t=e+this.pagination.page_size;return this.filteredTableData.slice(e,t)},uniqueSchoolYears:function(){var e=Object(r["a"])(new Set(this.tableData.map((function(e){return e.schoolYear}))));return e}},methods:{gotoDetail:function(e){this.$router.push({name:"detailTrainingPoint_edit",params:{id:e._id}})},loadDetailTrainingPoint:function(){var e=this;Object(s["a"])().then((function(t){t&&t.data&&t.data.success?e.tableData=t.data.detailTrainingPoints:console.error("Không thành công: ",t.data)})).catch((function(e){console.error("Lỗi khi tải điểm rèn luyện: ",e)}))},confirmDelete:function(e){var t=this;this.$confirm("Xác nhận xóa phiếu điểm","Cảnh báo",{confirmButtonText:"Xóa",type:"warning"}).then((function(){Object(s["d"])(e._id).then((function(e){var n=e.data;console.log(n),n.success&&t.loadDetailTrainingPoint()})).finally((function(){t.$wrLoading(!1)}))})).catch()},handlePageSizeChange:function(e){this.pagination.page_size=e,this.pagination.current_page=1},handleCurrentPageChange:function(e){this.pagination.current_page=e},formatDate:function(e){return Object(l["a"])(new Date(e),"dd/MM/yyyy ")},selectFilter:function(e){this.selectedFilter=e},loadInfoToFilter:function(){this.khoaList=this.$store.getters.khoaList,this.nghanhList=this.$store.getters.nghanhList,this.lopList=this.$store.getters.lopList},resetData:function(){this.selectedKhoa="",this.selectedNganh="",this.selectedLop="",this.search="",this.selectedSemester="",this.selectedNam=""}},watch:{uniqueSchoolYears:{handler:function(e){this.namList=e},immediate:!0}}}),c=o,u=(n("d5e4"),n("0c7c")),d=Object(u["a"])(c,a,i,!1,null,null,null);t["default"]=d.exports},"386d":function(e,t,n){"use strict";var a=n("cb7c"),i=n("83a1"),r=n("5f1b");n("214f")("search",1,(function(e,t,n,s){return[function(n){var a=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,a):new RegExp(n)[t](String(a))},function(e){var t=s(n,e,this);if(t.done)return t.value;var l=a(e),o=String(this),c=l.lastIndex;i(c,0)||(l.lastIndex=0);var u=r(l,o);return i(l.lastIndex,c)||(l.lastIndex=c),null===u?-1:u.index}]}))},"4f7f":function(e,t,n){"use strict";var a=n("c26b"),i=n("b39a"),r="Set";e.exports=n("e0b8")(r,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return a.def(i(this,r),e=0===e?0:e,e)}},a)},"64b2":function(e,t,n){},"72d7":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return o}));var a=n("b775");function i(e,t){return Object(a["a"])({url:"/detailTrainingPoint/search",method:"get",params:{semester:e,schoolYear:t}})}function r(){return Object(a["a"])({url:"/detailTrainingPoint",method:"get"})}function s(e){return Object(a["a"])({url:"/detailTrainingPoint/".concat(e),method:"get"})}function l(e){return Object(a["a"])({url:"/detailTrainingPoint",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/detailTrainingPoint/".concat(e),method:"delete"})}},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},b39a:function(e,t,n){var a=n("d3f4");e.exports=function(e,t){if(!a(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},c26b:function(e,t,n){"use strict";var a=n("86cc").f,i=n("2aeb"),r=n("dcbc"),s=n("9b43"),l=n("f605"),o=n("4a59"),c=n("01f9"),u=n("d53b"),d=n("7a56"),f=n("9e1e"),h=n("67ab").fastKey,p=n("b39a"),g=f?"_s":"size",_=function(e,t){var n,a=h(t);if("F"!==a)return e._i[a];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var u=e((function(e,a){l(e,u,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=a&&o(a,n,e[c],e)}));return r(u.prototype,{clear:function(){for(var e=p(this,t),n=e._i,a=e._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete n[a.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var n=p(this,t),a=_(n,e);if(a){var i=a.n,r=a.p;delete n._i[a.i],a.r=!0,r&&(r.n=i),i&&(i.p=r),n._f==a&&(n._f=i),n._l==a&&(n._l=r),n[g]--}return!!a},forEach:function(e){p(this,t);var n,a=s(e,arguments.length>1?arguments[1]:void 0,3);while(n=n?n.n:this._f){a(n.v,n.k,this);while(n&&n.r)n=n.p}},has:function(e){return!!_(p(this,t),e)}}),f&&a(u.prototype,"size",{get:function(){return p(this,t)[g]}}),u},def:function(e,t,n){var a,i,r=_(e,t);return r?r.v=n:(e._l=r={i:i=h(t,!0),k:t,v:n,p:a=e._l,n:void 0,r:!1},e._f||(e._f=r),a&&(a.n=r),e[g]++,"F"!==i&&(e._i[i]=r)),e},getEntry:_,setStrong:function(e,t,n){c(e,t,(function(e,n){this._t=p(e,t),this._k=n,this._l=void 0}),(function(){var e=this,t=e._k,n=e._l;while(n&&n.r)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?u(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,u(1))}),n?"entries":"values",!n,!0),d(t)}}},d5e4:function(e,t,n){"use strict";n("64b2")},e0b8:function(e,t,n){"use strict";var a=n("7726"),i=n("5ca1"),r=n("2aba"),s=n("dcbc"),l=n("67ab"),o=n("4a59"),c=n("f605"),u=n("d3f4"),d=n("79e5"),f=n("5cc5"),h=n("7f20"),p=n("5dbc");e.exports=function(e,t,n,g,_,b){var v=a[e],m=v,w=_?"set":"add",y=m&&m.prototype,k={},S=function(e){var t=y[e];r(y,e,"delete"==e||"has"==e?function(e){return!(b&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return b&&!u(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof m&&(b||y.forEach&&!d((function(){(new m).entries().next()})))){var D=new m,T=D[w](b?{}:-0,1)!=D,C=d((function(){D.has(1)})),L=f((function(e){new m(e)})),x=!b&&d((function(){var e=new m,t=5;while(t--)e[w](t,t);return!e.has(-0)}));L||(m=t((function(t,n){c(t,m,e);var a=p(new v,t,m);return void 0!=n&&o(n,_,a[w],a),a})),m.prototype=y,y.constructor=m),(C||x)&&(S("delete"),S("has"),_&&S("get")),(x||T)&&S(w),b&&y.clear&&delete y.clear}else m=g.getConstructor(t,e,_,w),s(m.prototype,n),l.NEED=!0;return h(m,e),k[e]=m,i(i.G+i.W+i.F*(m!=v),k),b||g.setStrong(m,e,_),m}}}]);