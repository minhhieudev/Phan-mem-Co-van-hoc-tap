(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e6a3d55","chunk-45ece578","chunk-782794c5"],{1142:function(t,e,a){},"148d":function(t,e,a){},"19b3":function(t,e,a){"use strict";a("148d")},"35d7":function(t,e,a){"use strict";a("1142")},"425e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"emoji-picker"},t._l(t.emojis,(function(a,n){return e("div",{key:n,staticClass:"emoji",on:{click:function(e){return t.insertEmoji(a)}}},[t._v("\n    "+t._s(a)+"\n  ")])})),0)},i=[],r={data:function(){return{emojis:["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","😍","😘","🥰","😎","🤩","😏","😌","😑","😒","😓","😔","😕","😖","😗","😙","😚","🙂","🤗","🤔","🤨","😐","😶","😏","😟","😠","😡","🥺","😢","😣","😤","😥","😦","😧","😨","😩","🤯","😬","😰","😱","😳","🤪","😵","😶‍🌫️","😷","🤒","🤕","🤢","🤮","🥴","🤧","😇","🤠","🥳","🥺","🥱","🤤","🤥","🤫","🤭","🧐","🤓","😈","👿","👹","👺","💀","👻","👽","🛸","🚀","🛰️","💥","💫","💦","💨","🌪️","🌩️","🌧️","🌨️","🌦️","🌤️","☀️","🌤️","⛅","🌥️","☁️","🌦️","🌧️","🌨️","🌩️","🌪️","💧","💦","🌊","🍏","🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🍈","🍒","🍑","🥭","🍍","🥥","🥝","🍅","🍆","🥑","🥦","🥬","🥒","🌶️","🌽","🥕","🥔","🍠","🥐","🍞","🥖","🥨","🧀","🥚","🍳","🧈","🥞","🧇","🥓","🥩","🍗","🍖","🦴","🌭","🍔","🍟","🍕","🥪","🍱","🍲","🥣","🥗","🍿","🧂","🥫","🍯","🍮","🍩","🍪","🎂","🍰","🧁","🥧","🍫","🍬","🍭","🍮","🍯","🍦","🍨","🍧","🎂","🍰","🧁","🥧","🍽️","🍴","🥄","🏺","🍶","🍾","🍷","🍸","🍹","🍺","🍻","🥂","🥃","🥤","🧊","🥢","🍽️","🥄","🏺","🥂","🍾","🍷","🍸","🍹","🍺","🍻","🥃","🥤","🧊","🥢"]}},methods:{insertEmoji:function(t){this.$emit("emoji-selected",t)}}},s=r,o=(a("4638"),a("0c7c")),c=Object(o["a"])(s,n,i,!1,null,"ca281478",null);e["default"]=c.exports},4638:function(t,e,a){"use strict";a("a772")},"4f37":function(t,e,a){"use strict";a("aa77")("trim",(function(t){return function(){return t(this,3)}}))},"868a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"answer"},[e("div",{staticClass:"info"},[e("el-avatar",{attrs:{size:t.avatarSize,src:t.avatarUrl}}),e("div",[e("div",{staticClass:"custom-flex"},[e("span",{staticClass:"author"},[t._v(t._s(t.user))]),e("span",{staticClass:"date"},[t._v(t._s(t.createdAt))])])]),e("div",{staticClass:"actions ml-4"},[e("div",{staticClass:"like-container"},[e("i",{staticClass:"fa fa-heart-o",attrs:{"aria-hidden":"true"}}),e("span",{staticClass:"likes"},[t._v(t._s(t.likes))])])])],1),e("div",{staticClass:"content"},[t._v(t._s(t.content))])])},i=[],r=(a("c5f6"),a("beaf")),s=a("2420"),o=a("fd3a"),c=a("8c86");function l(t){Object(c["a"])(1,arguments);var e=Object(o["a"])(t);return e.setHours(0,0,0,0),e}var u=864e5;function d(t,e){Object(c["a"])(2,arguments);var a=l(t),n=l(e),i=a.getTime()-Object(s["a"])(a),r=n.getTime()-Object(s["a"])(n);return Math.round((i-r)/u)}var f=a("b166"),h=a("e3c5"),v=a("83d2"),p=a("fe1f");function m(t,e,a){var n,i,l,u,m,b,k,y,g,j;Object(c["a"])(2,arguments);var C=Object(o["a"])(t),w=Object(o["a"])(e),_=Object(r["a"])(),O=null!==(n=null!==(i=null===a||void 0===a?void 0:a.locale)&&void 0!==i?i:_.locale)&&void 0!==n?n:h["a"],x=Object(p["a"])(null!==(l=null!==(u=null!==(m=null!==(b=null===a||void 0===a?void 0:a.weekStartsOn)&&void 0!==b?b:null===a||void 0===a||null===(k=a.locale)||void 0===k||null===(y=k.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==m?m:_.weekStartsOn)&&void 0!==u?u:null===(g=_.locale)||void 0===g||null===(j=g.options)||void 0===j?void 0:j.weekStartsOn)&&void 0!==l?l:0);if(!O.localize)throw new RangeError("locale must contain localize property");if(!O.formatLong)throw new RangeError("locale must contain formatLong property");if(!O.formatRelative)throw new RangeError("locale must contain formatRelative property");var S,E=d(C,w);if(isNaN(E))throw new RangeError("Invalid time value");S=E<-6?"other":E<-1?"lastWeek":E<0?"yesterday":E<1?"today":E<2?"tomorrow":E<7?"nextWeek":"other";var R=Object(v["a"])(C,Object(s["a"])(C)),A=Object(v["a"])(w,Object(s["a"])(w)),P=O.formatRelative(S,R,A,{locale:O,weekStartsOn:x});return Object(f["a"])(C,P,{locale:O,weekStartsOn:x})}var b={props:{content:String,user:String,createdAt:String,avatarUrl:String,likes:Number},computed:{avatarSize:function(){return"small"},formattedDate:function(){return this.createdAt?this.formatDate(this.createdAt):""}},created:function(){},methods:{formatDate:function(t){var e="";return t&&(e=m(new Date(1e3*t),new Date),e=e.charAt(0).toUpperCase()+e.slice(1)),e}}},k=b,y=(a("19b3"),a("0c7c")),g=Object(y["a"])(k,n,i,!1,null,"61f1bfe9",null);e["default"]=g.exports},"9a88":function(t,e,a){"use strict";a.r(e);a("57e7");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"custom-dialog",staticStyle:{"z-index":"9999"}},[e("el-dialog",{attrs:{visible:t.isInviteMemberVisible},on:{"update:visible":function(e){t.isInviteMemberVisible=e}}},[e("div",{staticClass:"post p-1"},[e("div",{staticClass:"info"},[e("el-avatar",{attrs:{size:t.avatarSize,src:t.avatarUrl}}),e("div",{staticClass:"custom-flex"},[e("span",{staticClass:"author"},[t._v(t._s(t.user))]),e("span",{staticClass:"date"},[t._v(t._s(t.createdAt))])])],1),e("div",{staticClass:"title"},[t._v("\n        "+t._s(t.title)+"\n      ")]),e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.formattedContent)}}),e("div",{staticClass:"actions"},[e("div",{staticClass:"like-container"},[e("i",{staticClass:"fa fa-heart-o",attrs:{"aria-hidden":"true"}}),e("span",{staticClass:"likes"},[t._v(t._s(t.likes))])]),e("div",{staticClass:"comment-container"},[e("el-icon",{staticClass:"el-icon-chat-dot-square",staticStyle:{color:"rgb(24, 61, 228)"}}),e("span",{staticClass:"comments"},[t._v(t._s(t.comments))])],1)]),t.attachmentPath.length>0?e("div",{staticClass:"attachments"},[e("p",[e("strong",[t._v("Đính kèm:")])]),e("ul",t._l(t.attachmentPath,(function(a,n){return e("li",{key:n},[e("a",{attrs:{href:a.path,target:"_blank",download:a.filename},on:{click:function(e){return e.preventDefault(),t.downloadAttachment(a)}}},[e("i",{class:t.getFileIconClass(a.filename).class,style:{color:t.getFileIconClass(a.filename).color}}),t._v("\n              "+t._s(a.filename)+"\n            ")])])})),0)]):t._e(),e("div",{staticClass:"reply-container"},[e("div",{staticClass:"avatar"},[e("el-avatar",{attrs:{size:t.avatarSize,src:this.$store.getters.currentUser.avatarUrl}})],1),e("div",{staticClass:"input-box"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.replyText,expression:"replyText"}],staticClass:"reply-input",attrs:{placeholder:"Nhập phản hồi của bạn..."},domProps:{value:t.replyText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendReply.apply(null,arguments)},input:function(e){e.target.composing||(t.replyText=e.target.value)}}})]),e("div",{staticClass:"emoji-button",on:{click:t.showEmojiPicker}},[t._v("\n          😃\n        ")]),e("div",{staticClass:"send-button mr-3",on:{click:t.sendReply}},[e("i",{staticClass:"fa fa-paper-plane",staticStyle:{color:"rgb(12, 126, 233)"},attrs:{"aria-hidden":"true"}})])])]),t.isEmojiPickerVisible?e("emoji-picker",{on:{"emoji-selected":t.insertEmoji}}):t._e(),e("div",{staticClass:"answer-list mt-2",staticStyle:{"max-height":"200px","overflow-y":"auto"}},t._l(t.reply,(function(a){return e("answer",{key:a.id,attrs:{content:a.content,avatarUrl:a.user.avatarUrl,user:a.user.fullname,createdAt:t.formatDate(a.createdAt),likes:a.likes}})})),1)],1)],1)},i=[],r=(a("28a5"),a("4f37"),a("a481"),a("c5f6"),a("868a")),s=a("b775"),o="reply";function c(t){return console.log("api"),Object(s["a"])({url:"/".concat(o,"/").concat(t),method:"get"})}function l(t){return Object(s["a"])({url:"/".concat(o),method:"post",data:t})}var u=a("b166"),d=a("425e"),f=a("caf6"),h=a("bc3a"),v=a.n(h),p={props:{title:String,content:String,id:String,user:String,createdAt:String,avatarUrl:String,likes:Number,attachmentPath:{type:Array,default:function(){return[]}},comments:Number},computed:{avatarSize:function(){return"small"},formattedContent:function(){return this.content.replace(/\n/g,"<br>")},formattedDate:function(){return this.createdAt?this.createdAt>0?this.formatDate(this.createdAt):"Ngày tạo không hợp lệ":"Ngày tạo không xác định"},replyCount:function(){return this.reply.length}},created:function(){this.loadReply()},data:function(){return{replyText:"",reply:[],isInviteMemberVisible:!1,isEmojiPickerVisible:!1}},components:{Answer:r["default"],EmojiPicker:d["default"]},methods:{formatDate:function(t){return String(Object(u["a"])(new Date(t),"dd/MM/yyyy HH:mm"))},showEmojiPicker:function(){this.isEmojiPickerVisible=!0},insertEmoji:function(t){this.replyText+=t,this.isEmojiPickerVisible=!1},loadReply:function(){var t=this;console.log("load"),c(this.id).then((function(e){e&&e.data&&e.data.success?(t.reply=e.data.reply,Object(f["d"])(t.id,t.reply.length)):console.error("Không thành công: ",e.data)})).catch((function(t){console.error("Lỗi khi tải câu trả lời: ",t)}))},childFunction:function(){this.isInviteMemberVisible=!0,this.loadReply()},showInviteDialog:function(){this.isInviteMemberVisible=!0},sendReply:function(t){var e=this;if(""!==this.replyText.trim()){var a={content:this.replyText,post:this.id,user:this.$store.getters.user._id};l(a).then((function(t){if(t&&200===t.status){var a=t.data;a&&a.success?(e.loadReply(),e.replyText=""):console.error("Lỗi khi lưu phản hồi: ",a)}else console.error("Lỗi khi gửi phản hồi, phản hồi không hợp lệ: ",t)})).catch((function(t){console.error("Lỗi khi gửi phản hồi: ",t)}))}},validatePhotoURL:function(t){return"string"===typeof t?t:""},toggleInviteMemberDialog:function(){this.internalIsInviteMemberVisible=!this.internalIsInviteMemberVisible},downloadAttachment:function(t){v()({url:t.path,method:"GET",responseType:"blob",baseURL:"https://backend-3lvb.onrender.com"}).then((function(e){var a=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=a,n.setAttribute("download",t.filename),document.body.appendChild(n),n.click(),document.body.removeChild(n)})).catch((function(t){console.error("Lỗi khi tải xuống tệp:",t)}))},getFileIconClass:function(t){var e=t.split(".").pop().toLowerCase(),a={class:"fas fa-file",color:"#333"};switch(e){case"pdf":a.class="fas fa-file-pdf",a.color="#ff0000";break;case"doc":case"docx":a.class="fas fa-file-word",a.color="#2b5797";break;case"xls":case"xlsx":a.class="fas fa-file-excel",a.color="#1f8a70";break;default:break}return a}}},m=p,b=(a("35d7"),a("0c7c")),k=Object(b["a"])(m,n,i,!1,null,null,null);e["default"]=k.exports},a772:function(t,e,a){},caf6:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return o})),a.d(e,"e",(function(){return c})),a.d(e,"f",(function(){return l})),a.d(e,"d",(function(){return u})),a.d(e,"g",(function(){return d}));var n=a("b775"),i="post";function r(){return Object(n["a"])({url:"/".concat(i),method:"get"})}function s(t){return Object(n["a"])({url:"/".concat(i,"/").concat(t),method:"delete"})}function o(t){return Object(n["a"])({url:"/".concat(i),method:"post",data:t})}function c(t){return Object(n["a"])({url:"/".concat(i,"/like/").concat(t),method:"post"})}function l(t,e){return Object(n["a"])({url:"/".concat(i,"/updatePinnedStatus/").concat(t),method:"post",data:{pinned:e}})}function u(t,e){return Object(n["a"])({url:"/".concat(i,"/").concat(t,"/count"),method:"post",data:{answersCount:e}})}function d(t,e){return Object(n["a"])({url:"/".concat(i,"/updatePost/").concat(t),method:"post",data:{newPost:e}})}}}]);