(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e33e04a"],{"11a2":function(t,e,n){"use strict";n.r(e);n("386d");var a,i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"Consultant custom-scroll-cv"},[e("el-card",[e("h4",{staticClass:"font-weight-bold text-success text-center mb-5"},[t._v("DANH SÁCH CỐ VẤN")]),e("div",{staticClass:"action-cv justify-content-between mb-4"},[e("div",{staticClass:"d-flex justify-content-start"},[e("div",{staticClass:"d-flex align-items-center p-2",staticStyle:{color:"rgb(1, 6, 12)"}},[e("i",{staticClass:"fa-solid fa-rotate-right",on:{click:t.resetFilters}}),e("div",{staticClass:"d-flex align-items-center ml-5 border-right"},[e("i",{staticClass:"fa-solid fa-filter mr-3",staticStyle:{color:"rgb(20, 197, 197)"}}),e("el-select",{staticClass:"custom-input-cv",attrs:{placeholder:"Khoa",filterable:""},model:{value:t.selectedKhoa,callback:function(e){t.selectedKhoa=e},expression:"selectedKhoa"}},t._l(t.khoaLists,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)]),e("div",{staticClass:"d-flex align-items-center p-2"},[e("el-input",{staticClass:"search-input",attrs:{size:"medium",placeholder:"Tìm theo tên, email..."},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),e("el-button",{staticClass:"ml-2",attrs:{icon:"el-icon-search",type:"success",circle:""}})],1)]),e("el-button",{attrs:{type:"success",round:"",size:"medium"},on:{click:function(e){return t.goToAddNewPage()}}},[t._v("Tạo mới")])],1),e("el-table",{staticClass:"custom-table",staticStyle:{width:"100%"},attrs:{data:t.currentPageData}},[e("el-table-column",{attrs:{label:"STT",width:"50"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.$index;n.row;return[e("span",[t._v(t._s(a+1+(t.pagination.current_page-1)*t.pagination.page_size))])]}}])}),e("el-table-column",{attrs:{prop:"fullName",label:"Tên cố vấn",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v("\n           "+t._s(n.fullName)+"\n         ")]}}])}),e("el-table-column",{attrs:{prop:"email",label:"Email",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v("\n           "+t._s(n.email)+"\n         ")]}}])}),e("el-table-column",{attrs:{prop:"position",label:"Chức vụ/chức danh, đơn vị",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v("\n           "+t._s(n.position)+"\n         ")]}}])}),e("el-table-column",{attrs:{prop:"mission",label:"Nhiệm vụ",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v("\n           "+t._s(n.mission)+"\n         ")]}}])}),e("el-table-column",{attrs:{label:"Thao tác",width:"150"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.row;return[e("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(e){return e.preventDefault(),t.gotoDetail(a)}}}),e("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",circle:""},on:{click:function(e){return e.preventDefault(),t.confirmDelete(a)}}})]}}])})],1),e("div",{staticClass:"mt-2"},[e("el-pagination",{attrs:{background:"",layout:"jumper, prev, pager, next, sizes, total","page-sizes":[10,25,50,100],"page-size":t.pagination.page_size,total:t.filteredTableData.length,"current-page":t.pagination.current_page},on:{"update:pageSize":function(e){return t.$set(t.pagination,"page_size",e)},"update:page-size":function(e){return t.$set(t.pagination,"page_size",e)},"update:currentPage":function(e){return t.$set(t.pagination,"current_page",e)},"update:current-page":function(e){return t.$set(t.pagination,"current_page",e)},"current-change":t.handleCurrentPageChange,"size-change":t.handlePageSizeChange}})],1)],1)],1)},c=[],r=n("ade3"),o=(n("6762"),n("2fdb"),n("d25f"),n("6080")),s=n("49e5"),l=n("b166"),u=(n("15f5"),"consultant"),d={data:function(){return{tableData:[],pagination:{current_page:1,page_size:10},totalData:0,search:"",selectedKhoa:"",khoaLists:[]}},created:function(){this.loadData(),this.fetchClassLists()},computed:{filteredTableData:function(){var t=this;return this.tableData.filter((function(e){return(!t.search||e.fullName.toLowerCase().includes(t.search.toLowerCase())||e.email.toLowerCase().includes(t.search.toLowerCase()))&&(!t.selectedKhoa||e.department===t.selectedKhoa)}))},currentPageData:function(){var t=(this.pagination.current_page-1)*this.pagination.page_size,e=t+this.pagination.page_size;return this.filteredTableData.slice(t,e)}},methods:(a={goToAddNewPage:function(){this.$router.push({name:"".concat(u,"_new")})},gotoDetail:function(t){this.$router.push({name:"".concat(u,"_edit"),params:{id:t._id}})},confirmDelete:function(t){var e=this;this.$confirm("Xác nhận xóa ".concat(u,"?"),"Cảnh báo",{confirmButtonText:"Xóa",type:"warning"}).then((function(){Object(o["d"])(t._id).then((function(t){var n=t.data;n.success&&e.loadData()})).finally((function(){e.$wrLoading(!1)}))})).catch()},loadData:function(){var t=this;Object(o["a"])().then((function(e){e&&e.data&&e.data.success?t.tableData=e.data.consultants:console.error("Không thành công: ",e.data)})).catch((function(t){console.error("Lỗi khi tải điểm rèn luyện: ",t)}))},handlePageSizeChange:function(){this.pagination.current_page=1,this.loadData()},formatDate:function(t){return Object(l["a"])(new Date(t),"dd/MM/yyyy ")},resetFilters:function(){this.selectedKhoa="",this.search=""},fetchClassLists:function(){var t=this;Object(s["f"])().then((function(e){t.khoaLists=e.data.khoaLists})).catch((function(t){console.error("Error fetching Khoa list:",t)}))}},Object(r["a"])(a,"handlePageSizeChange",(function(t){this.pagination.page_size=t,this.pagination.current_page=1})),Object(r["a"])(a,"handleCurrentPageChange",(function(t){this.pagination.current_page=t})),a)},f=d,h=(n("d90c"),n("0c7c")),p=Object(h["a"])(f,i,c,!1,null,null,null);e["default"]=p.exports},"386d":function(t,e,n){"use strict";var a=n("cb7c"),i=n("83a1"),c=n("5f1b");n("214f")("search",1,(function(t,e,n,r){return[function(n){var a=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,a):new RegExp(n)[e](String(a))},function(t){var e=r(n,t,this);if(e.done)return e.value;var o=a(t),s=String(this),l=o.lastIndex;i(l,0)||(o.lastIndex=0);var u=c(o,s);return i(o.lastIndex,l)||(o.lastIndex=l),null===u?-1:u.index}]}))},6080:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"c",(function(){return l}));n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("ac6a"),n("456d"),n("ade3");var a=n("b775");var i="consultant";function c(){return Object(a["a"])({url:"/".concat(i),method:"get"})}function r(t){return Object(a["a"])({url:"/".concat(i,"/").concat(t),method:"delete"})}function o(t){return Object(a["a"])({url:"/".concat(i,"/").concat(t),method:"get"})}function s(t){return Object(a["a"])({url:"/".concat(i),method:"post",data:t})}function l(t){var e=t.email;return Object(a["a"])({url:"/".concat(i,"/get-fullName/").concat(encodeURIComponent(e)),method:"get"})}},"6e29":function(t,e,n){},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},d90c:function(t,e,n){"use strict";n("6e29")}}]);